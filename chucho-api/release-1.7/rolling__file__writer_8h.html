<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Chucho: rolling_file_writer.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="itzcuintli_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Chucho
   &#160;<span id="projectnumber">1.7</span>
   </div>
   <div id="projectbrief">A C++11 logging framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_dbed4cd056940b7d61442a20bdb31de5.html">chucho</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">rolling_file_writer.h File Reference<div class="ingroups"><a class="el" href="group__c.html">C</a> &raquo; <a class="el" href="group__c__writers.html">Writers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A writer that writes to files and rolls them.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="file__writer_8h_source.html">chucho/file_writer.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="file__roller_8h_source.html">chucho/file_roller.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="file__roll__trigger_8h_source.html">chucho/file_roll_trigger.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for rolling_file_writer.h:</div>
<div class="dyncontent">
<div class="center"><img src="rolling__file__writer_8h__incl.png" border="0" usemap="#rolling__file__writer_8h" alt=""/></div>
<map name="rolling__file__writer_8h" id="rolling__file__writer_8h">
<area shape="rect" id="node2" href="file__writer_8h.html" title="Functions for file writers. " alt="" coords="174,80,316,107"/>
<area shape="rect" id="node9" href="file__roller_8h.html" title="Types and functions common to all file rollers. " alt="" coords="341,155,480,181"/>
<area shape="rect" id="node11" href="file__roll__trigger_8h.html" title="Types and functions common to all file roll triggers. " alt="" coords="513,80,689,107"/>
<area shape="rect" id="node3" href="writer_8h.html" title="Functions that can be used with any of the writers created by one of the writer creation functions..." alt="" coords="165,155,281,181"/>
<area shape="rect" id="node4" href="filter_8h.html" title="Types and functions common to all filters. " alt="" coords="5,229,115,256"/>
<area shape="rect" id="node7" href="formatter_8h.html" title="Functions that can be used with any formatter. " alt="" coords="139,229,277,256"/>
<area shape="rect" id="node5" href="return__code_8h.html" title="Return codes of Chucho C functions. " alt="" coords="269,304,427,331"/>
<area shape="rect" id="node10" href="file__compressor_8h.html" title="Functions common to all file compressors. " alt="" coords="398,229,580,256"/>
</map>
</div>
</div>
<p><a href="rolling__file__writer_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2f7a62e5f91041c7dfe4d3c144271662"><td class="memItemLeft" align="right" valign="top"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rolling__file__writer_8h.html#a2f7a62e5f91041c7dfe4d3c144271662">chucho_rfwrt_get_file_roll_trigger</a> (const <a class="el" href="writer_8h.html#aa4d4e598c39ec4e59057a58b50684d65">chucho_writer</a> *wrt, <a class="el" href="file__roll__trigger_8h.html#a7308ba529ed9e6292312b791fcda1340">chucho_file_roll_trigger</a> **trg)</td></tr>
<tr class="memdesc:a2f7a62e5f91041c7dfe4d3c144271662"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the file roll trigger associated with a rolling file writer.  <a href="#a2f7a62e5f91041c7dfe4d3c144271662">More...</a><br /></td></tr>
<tr class="separator:a2f7a62e5f91041c7dfe4d3c144271662"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ee048702972e7944ef7dc0cab5d0489"><td class="memItemLeft" align="right" valign="top"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rolling__file__writer_8h.html#a0ee048702972e7944ef7dc0cab5d0489">chucho_rfwrt_get_file_roller</a> (const <a class="el" href="writer_8h.html#aa4d4e598c39ec4e59057a58b50684d65">chucho_writer</a> *wrt, <a class="el" href="file__roller_8h.html#a57e82c57c6764c11ed80ab0236fb6219">chucho_file_roller</a> **rlr)</td></tr>
<tr class="memdesc:a0ee048702972e7944ef7dc0cab5d0489"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the file roller associated with a rolling file writer.  <a href="#a0ee048702972e7944ef7dc0cab5d0489">More...</a><br /></td></tr>
<tr class="separator:a0ee048702972e7944ef7dc0cab5d0489"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Creation</div></td></tr>
<tr class="memitem:ae1032b645bab98a2eed2d75659589bde"><td class="memItemLeft" align="right" valign="top"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rolling__file__writer_8h.html#ae1032b645bab98a2eed2d75659589bde">chucho_create_rolling_file_writer</a> (<a class="el" href="writer_8h.html#aa4d4e598c39ec4e59057a58b50684d65">chucho_writer</a> **wrt, <a class="el" href="formatter_8h.html#a31b3716a47119d95602990928271a3fb">chucho_formatter</a> *fmt, <a class="el" href="file__roller_8h.html#a57e82c57c6764c11ed80ab0236fb6219">chucho_file_roller</a> *rlr, <a class="el" href="file__roll__trigger_8h.html#a7308ba529ed9e6292312b791fcda1340">chucho_file_roll_trigger</a> *trg, const char *const name, <a class="el" href="file__writer_8h.html#a5035bf0da0a7aa3d8e952ca28765eb47">chucho_on_start</a> on_start, int flush)</td></tr>
<tr class="memdesc:ae1032b645bab98a2eed2d75659589bde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a rolling file writer.  <a href="#ae1032b645bab98a2eed2d75659589bde">More...</a><br /></td></tr>
<tr class="separator:ae1032b645bab98a2eed2d75659589bde"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A writer that writes to files and rolls them. </p>
<p>A rolling_file_writer does its work with the help of a couple of friends: the file_roll_trigger and the file_roller. A file_roll_trigger is queried every time an event is written to find out whether it is time to roll the file. The trigger answers the question, when?</p>
<p>If the trigger indicates that the time for rolling has come, then the file_roller is told to perform a roll. The roller answers the question, how?</p>
<p>Additionally, the file_roller may also be a file_roll_trigger, as is the case of time_file_roller. Therefore, if the file_roller is also a file_roll_trigger, then it is not necessary also to construct the rolling_file_writer with a separate file_roll_trigger.</p>
<p>The rolling_file_writer may be constructed either with or without an active file name. Without an active file name, the active name becomes the result of calling the file_roller::get_active_file_name() method. If the rolling_file_writer is constructed with its own active file name, then that file is always the one that is currently being written, and the rolled files get their names from the file_roller. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ae1032b645bab98a2eed2d75659589bde"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a> chucho_create_rolling_file_writer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="writer_8h.html#aa4d4e598c39ec4e59057a58b50684d65">chucho_writer</a> **&#160;</td>
          <td class="paramname"><em>wrt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="formatter_8h.html#a31b3716a47119d95602990928271a3fb">chucho_formatter</a> *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="file__roller_8h.html#a57e82c57c6764c11ed80ab0236fb6219">chucho_file_roller</a> *&#160;</td>
          <td class="paramname"><em>rlr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="file__roll__trigger_8h.html#a7308ba529ed9e6292312b791fcda1340">chucho_file_roll_trigger</a> *&#160;</td>
          <td class="paramname"><em>trg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="file__writer_8h.html#a5035bf0da0a7aa3d8e952ca28765eb47">chucho_on_start</a>&#160;</td>
          <td class="paramname"><em>on_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flush</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a rolling file writer. </p>
<dl class="section post"><dt>Postcondition</dt><dd>Ownership of the wrt parameter is transferred to the caller, and it must be released with the <a class="el" href="writer_8h.html#a1e6c7742739275054d8f3963362d063f">chucho_release_writer()</a> function. </dd>
<dd>
Ownership of the fmt parameter is transferred to the callee. </dd>
<dd>
Ownership of the rlr parameter is transferred to the callee. </dd>
<dd>
Ownership of the trg parameter is transferred to the callee.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The trg parameter can be NULL if the given file roller is also a file roll trigger. </dd>
<dd>
The name parameter can be NULL, if the given file roller also provides a name. </dd>
<dd>
The returned writer may call any of the functions except for the creation function from <a class="el" href="file__writer_8h.html">file_writer.h</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">wrt</td><td>the writer to create </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fmt</td><td>the formatter </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rlr</td><td>the file roller </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trg</td><td>the file roll trigger, which can be NULL if the file roller is also a file roll trigger </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>the active file name, which can be NULL if the file roller provides an active file name </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">on_start</td><td>whether to truncate or append to the file on start </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">flush</td><td>non-zero if the writer should flush to the file after every write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a value from <a class="el" href="return__code_8h.html">return_code.h</a> indicating success or failure </dd></dl>

</div>
</div>
<a class="anchor" id="a2f7a62e5f91041c7dfe4d3c144271662"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a> chucho_rfwrt_get_file_roll_trigger </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="writer_8h.html#aa4d4e598c39ec4e59057a58b50684d65">chucho_writer</a> *&#160;</td>
          <td class="paramname"><em>wrt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="file__roll__trigger_8h.html#a7308ba529ed9e6292312b791fcda1340">chucho_file_roll_trigger</a> **&#160;</td>
          <td class="paramname"><em>trg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the file roll trigger associated with a rolling file writer. </p>
<dl class="section post"><dt>Postcondition</dt><dd>Ownership of the trg parameter is transferred to the caller, and it must be released with the <a class="el" href="file__roll__trigger_8h.html#abafe4f0f6e005c6a5a1b250129454564">chucho_release_file_roll_trigger()</a> function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">wrt</td><td>the writer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">trg</td><td>the file roll trigger </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a value from <a class="el" href="return__code_8h.html">return_code.h</a> indicating success or failure </dd></dl>

</div>
</div>
<a class="anchor" id="a0ee048702972e7944ef7dc0cab5d0489"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a> chucho_rfwrt_get_file_roller </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="writer_8h.html#aa4d4e598c39ec4e59057a58b50684d65">chucho_writer</a> *&#160;</td>
          <td class="paramname"><em>wrt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="file__roller_8h.html#a57e82c57c6764c11ed80ab0236fb6219">chucho_file_roller</a> **&#160;</td>
          <td class="paramname"><em>rlr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the file roller associated with a rolling file writer. </p>
<dl class="section post"><dt>Postcondition</dt><dd>Ownership of the rlr parameter is transferred to the caller, and it must be released with the <a class="el" href="file__roller_8h.html#afe9a9c2b084cbf8bd83c38758a05ef0f">chucho_release_file_roller()</a> function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">wrt</td><td>the writer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rlr</td><td>the file roller </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a value from <a class="el" href="return__code_8h.html">return_code.h</a> indicating success or failure </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jul 31 2015 08:41:01 for Chucho by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
