<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="itzcuintli.ico" type="image/x-icon"/>
<meta http-equiv="Content-Type" content="text/xhtml
charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Chucho: remote_writer.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px
">
  <td id="projectlogo"><img alt="Logo" src="itzcuintli_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em
">
   <div id="projectname">Chucho
   &#160
<span id="projectnumber">1.12</span>
   </div>
   <div id="projectbrief">A C++11 logging framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_dbed4cd056940b7d61442a20bdb31de5.html">chucho</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">remote_writer.h File Reference<div class="ingroups"><a class="el" href="group__c.html">C</a> &raquo; <a class="el" href="group__c__writers.html">Writers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A writer that writes to a (possibly) remote chucho server.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="writer_8h_source.html">chucho/writer.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for remote_writer.h:</div>
<div class="dyncontent">
<div class="center"><img src="remote__writer_8h__incl.png" border="0" usemap="#remote__writer_8h" alt=""/></div>
<map name="remote__writer_8h" id="remote__writer_8h">
<area shape="rect" id="node2" href="writer_8h.html" title="Functions that can be used with any of the writers created by one of the writer creation functions..." alt="" coords="143,80,254,107"/>
<area shape="rect" id="node3" href="filter_8h.html" title="Types and functions common to all filters. " alt="" coords="5,155,109,181"/>
<area shape="rect" id="node6" href="formatter_8h.html" title="Functions that can be used with any formatter. " alt="" coords="133,155,264,181"/>
<area shape="rect" id="node4" href="return__code_8h.html" title="Return codes of Chucho C functions. " alt="" coords="55,229,201,256"/>
<area shape="rect" id="node5" href="export_8h_source.html" title="chucho/export.h" alt="" coords="71,304,185,331"/>
</map>
</div>
</div>
<p><a href="remote__writer_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a09328683d6a545d8b9cdd00f7728b0f1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="remote__writer_8h.html#a09328683d6a545d8b9cdd00f7728b0f1">chucho_rwrt_get_host</a> (const <a class="el" href="writer_8h.html#aa4d4e598c39ec4e59057a58b50684d65">chucho_writer</a> *wrt, const char **host)</td></tr>
<tr class="memdesc:a09328683d6a545d8b9cdd00f7728b0f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the host on which the chuchod server is running.  <a href="#a09328683d6a545d8b9cdd00f7728b0f1">More...</a><br /></td></tr>
<tr class="separator:a09328683d6a545d8b9cdd00f7728b0f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a123de80edec5d33ca59737f08410cfbc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="remote__writer_8h.html#a123de80edec5d33ca59737f08410cfbc">chucho_rwrt_get_port</a> (const <a class="el" href="writer_8h.html#aa4d4e598c39ec4e59057a58b50684d65">chucho_writer</a> *wrt, unsigned *port)</td></tr>
<tr class="memdesc:a123de80edec5d33ca59737f08410cfbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the port on which the chuchod server is listening.  <a href="#a123de80edec5d33ca59737f08410cfbc">More...</a><br /></td></tr>
<tr class="separator:a123de80edec5d33ca59737f08410cfbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52b9fdb38d3605797e2814a96ad32f6e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="remote__writer_8h.html#a52b9fdb38d3605797e2814a96ad32f6e">chucho_rwrt_get_unsent_cache_max</a> (const <a class="el" href="writer_8h.html#aa4d4e598c39ec4e59057a58b50684d65">chucho_writer</a> *wrt, size_t *cmax)</td></tr>
<tr class="memdesc:a52b9fdb38d3605797e2814a96ad32f6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the maximum size of the unsent event cache.  <a href="#a52b9fdb38d3605797e2814a96ad32f6e">More...</a><br /></td></tr>
<tr class="separator:a52b9fdb38d3605797e2814a96ad32f6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a425b5bfc74505b026036bb100e5df630"><td class="memItemLeft" align="right" valign="top"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="remote__writer_8h.html#a425b5bfc74505b026036bb100e5df630">chucho_rwrt_get_unsent_cache_size</a> (const <a class="el" href="writer_8h.html#aa4d4e598c39ec4e59057a58b50684d65">chucho_writer</a> *wrt, size_t *csize)</td></tr>
<tr class="memdesc:a425b5bfc74505b026036bb100e5df630"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the current size of the unsent event cache.  <a href="#a425b5bfc74505b026036bb100e5df630">More...</a><br /></td></tr>
<tr class="separator:a425b5bfc74505b026036bb100e5df630"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Creation</div></td></tr>
<tr class="memitem:ae377668fd9a7f87a3961d2d8421df976"><td class="memItemLeft" align="right" valign="top"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="remote__writer_8h.html#ae377668fd9a7f87a3961d2d8421df976">chucho_create_remote_writer</a> (<a class="el" href="writer_8h.html#aa4d4e598c39ec4e59057a58b50684d65">chucho_writer</a> **wrt, const char *const host, unsigned port, size_t unsent_cache_max)</td></tr>
<tr class="memdesc:ae377668fd9a7f87a3961d2d8421df976"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a remote writer.  <a href="#ae377668fd9a7f87a3961d2d8421df976">More...</a><br /></td></tr>
<tr class="separator:ae377668fd9a7f87a3961d2d8421df976"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa198ed7bd71221b513cb4814fb0ae960"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="remote__writer_8h.html#aa198ed7bd71221b513cb4814fb0ae960">CHUCHO_DEFAULT_REMOTE_UNSENT_CACHE_MAX</a></td></tr>
<tr class="memdesc:aa198ed7bd71221b513cb4814fb0ae960"><td class="mdescLeft">&#160;</td><td class="mdescRight">The default unsent cache size, which is 1000.  <a href="#aa198ed7bd71221b513cb4814fb0ae960">More...</a><br /></td></tr>
<tr class="separator:aa198ed7bd71221b513cb4814fb0ae960"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6774499f3ea559a80aea3033ef898ab0"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="remote__writer_8h.html#a6774499f3ea559a80aea3033ef898ab0">CHUCHO_DEFAULT_REMOTE_WRITER_PORT</a></td></tr>
<tr class="memdesc:a6774499f3ea559a80aea3033ef898ab0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The default port on which the chucho server is listening, which is 21012.  <a href="#a6774499f3ea559a80aea3033ef898ab0">More...</a><br /></td></tr>
<tr class="separator:a6774499f3ea559a80aea3033ef898ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A writer that writes to a (possibly) remote chucho server. </p>
<p>The chucho server running on the (possibly) remote host accepts any events written to this writer. The chucho server acts as a logging proxy: it must be configured with any loggers that appear in the events written to this logger. The logging settings for those loggers on the chucho server itself then serve as the settings used for events written to this remote_writer.</p>
<p>This writer will never block the writing thread while a connection to the chucho server is being made. However, after the connection has been established, then the socket is placed in blocking mode for subsequent writes. This is so that a slow network connection can appropriately push back on the process writing over the network.</p>
<p>When a connection is being established, or after a connection has been lost and must be re-established, then events are cached in a ring buffer. So, it is possible to lose events, but by adjusting the size of the event buffer, the possibility of event loss may be minimized.</p>
<p>This writer internally uses a yaml_formatter for serialization of the events. That is why no formatter can be set on this writer. The events are serialized and reconstituted intact on the server side. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ae377668fd9a7f87a3961d2d8421df976"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a> chucho_create_remote_writer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="writer_8h.html#aa4d4e598c39ec4e59057a58b50684d65">chucho_writer</a> **&#160;</td>
          <td class="paramname"><em>wrt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>unsent_cache_max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a remote writer. </p>
<dl class="section post"><dt>Postcondition</dt><dd>Ownership of the wrt parameter is transferred to the caller, and it must be released with the <a class="el" href="writer_8h.html#a1e6c7742739275054d8f3963362d063f">chucho_release_writer()</a> function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">wrt</td><td>the remote writer to create </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">host</td><td>the host on which the chuchod server is running </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>the port on which to connect </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">unsent_cache_max</td><td>the maximum size of the unsent cache size </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a value from <a class="el" href="return__code_8h.html">return_code.h</a> indicating success or failure </dd></dl>

</div>
</div>
<a class="anchor" id="a09328683d6a545d8b9cdd00f7728b0f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a> chucho_rwrt_get_host </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="writer_8h.html#aa4d4e598c39ec4e59057a58b50684d65">chucho_writer</a> *&#160;</td>
          <td class="paramname"><em>wrt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>host</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the host on which the chuchod server is running. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">wrt</td><td>the remote writer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">host</td><td>the host name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a value from <a class="el" href="return__code_8h.html">return_code.h</a> indicating success or failure </dd></dl>

</div>
</div>
<a class="anchor" id="a123de80edec5d33ca59737f08410cfbc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a> chucho_rwrt_get_port </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="writer_8h.html#aa4d4e598c39ec4e59057a58b50684d65">chucho_writer</a> *&#160;</td>
          <td class="paramname"><em>wrt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the port on which the chuchod server is listening. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">wrt</td><td>the remote writer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">port</td><td>the port </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a value from <a class="el" href="return__code_8h.html">return_code.h</a> indicating success or failure </dd></dl>

</div>
</div>
<a class="anchor" id="a52b9fdb38d3605797e2814a96ad32f6e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a> chucho_rwrt_get_unsent_cache_max </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="writer_8h.html#aa4d4e598c39ec4e59057a58b50684d65">chucho_writer</a> *&#160;</td>
          <td class="paramname"><em>wrt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>cmax</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the maximum size of the unsent event cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">wrt</td><td>the remote writer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cmax</td><td>the maximum size of the unsent cache </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a value from <a class="el" href="return__code_8h.html">return_code.h</a> indicating success or failure </dd></dl>

</div>
</div>
<a class="anchor" id="a425b5bfc74505b026036bb100e5df630"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a> chucho_rwrt_get_unsent_cache_size </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="writer_8h.html#aa4d4e598c39ec4e59057a58b50684d65">chucho_writer</a> *&#160;</td>
          <td class="paramname"><em>wrt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>csize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the current size of the unsent event cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">wrt</td><td>the remote writer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">csize</td><td>the current size of the unsent cache </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a value from <a class="el" href="return__code_8h.html">return_code.h</a> indicating success or failure </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="aa198ed7bd71221b513cb4814fb0ae960"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t CHUCHO_DEFAULT_REMOTE_UNSENT_CACHE_MAX</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The default unsent cache size, which is 1000. </p>
<p>Events are added to the unsent cache when the connection to the server is down. </p>

</div>
</div>
<a class="anchor" id="a6774499f3ea559a80aea3033ef898ab0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned CHUCHO_DEFAULT_REMOTE_WRITER_PORT</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The default port on which the chucho server is listening, which is 21012. </p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jan 25 2018 09:17:28 for Chucho by &#160
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
<script async src="//radar.cedexis.com/1/23762/radar.js"></script>
</body>
</html>
