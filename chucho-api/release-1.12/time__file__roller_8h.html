<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="itzcuintli.ico" type="image/x-icon"/>
<meta http-equiv="Content-Type" content="text/xhtml
charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Chucho: time_file_roller.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px
">
  <td id="projectlogo"><img alt="Logo" src="itzcuintli_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em
">
   <div id="projectname">Chucho
   &#160
<span id="projectnumber">1.12</span>
   </div>
   <div id="projectbrief">A C++11 logging framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_dbed4cd056940b7d61442a20bdb31de5.html">chucho</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">time_file_roller.h File Reference<div class="ingroups"><a class="el" href="group__c.html">C</a> &raquo; <a class="el" href="group__c__rolling.html">Rolling Files</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A file_roller that rolls files by time.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="file__roller_8h_source.html">chucho/file_roller.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for time_file_roller.h:</div>
<div class="dyncontent">
<div class="center"><img src="time__file__roller_8h__incl.png" border="0" usemap="#time__file__roller_8h" alt=""/></div>
<map name="time__file__roller_8h" id="time__file__roller_8h">
<area shape="rect" id="node2" href="file__roller_8h.html" title="Types and functions common to all file rollers. " alt="" coords="97,80,228,107"/>
<area shape="rect" id="node3" href="file__compressor_8h.html" title="Functions common to all file compressors. " alt="" coords="5,155,176,181"/>
<area shape="rect" id="node4" href="return__code_8h.html" title="Return codes of Chucho C functions. " alt="" coords="17,229,164,256"/>
<area shape="rect" id="node5" href="export_8h_source.html" title="chucho/export.h" alt="" coords="33,304,148,331"/>
</map>
</div>
</div>
<p><a href="time__file__roller_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa6ec9771fa43ec54c2d9429addbc2bdf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__file__roller_8h.html#aa6ec9771fa43ec54c2d9429addbc2bdf">chucho_trlr_get_file_name_pattern</a> (const <a class="el" href="file__roller_8h.html#a57e82c57c6764c11ed80ab0236fb6219">chucho_file_roller</a> *rlr, const char **pat)</td></tr>
<tr class="memdesc:aa6ec9771fa43ec54c2d9429addbc2bdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the file name pattern in use by this roller.  <a href="#aa6ec9771fa43ec54c2d9429addbc2bdf">More...</a><br /></td></tr>
<tr class="separator:aa6ec9771fa43ec54c2d9429addbc2bdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a702afe87ed9ad38e4b7e6bc7f2493922"><td class="memItemLeft" align="right" valign="top"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__file__roller_8h.html#a702afe87ed9ad38e4b7e6bc7f2493922">chucho_trlr_get_max_history</a> (const <a class="el" href="file__roller_8h.html#a57e82c57c6764c11ed80ab0236fb6219">chucho_file_roller</a> *rlr, size_t *hist)</td></tr>
<tr class="memdesc:a702afe87ed9ad38e4b7e6bc7f2493922"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the maximum number of rolled files to keep.  <a href="#a702afe87ed9ad38e4b7e6bc7f2493922">More...</a><br /></td></tr>
<tr class="separator:a702afe87ed9ad38e4b7e6bc7f2493922"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Creation</div></td></tr>
<tr class="memitem:ad593dcdb0649b2439f13db8ff1ebca58"><td class="memItemLeft" align="right" valign="top"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__file__roller_8h.html#ad593dcdb0649b2439f13db8ff1ebca58">chucho_create_time_file_roller</a> (<a class="el" href="file__roller_8h.html#a57e82c57c6764c11ed80ab0236fb6219">chucho_file_roller</a> **rlr, const char *const file_name_pattern, size_t max_history, <a class="el" href="file__compressor_8h.html#af4f87c5be0de33dbb069b15e96402111">chucho_file_compressor</a> *cmp)</td></tr>
<tr class="memdesc:ad593dcdb0649b2439f13db8ff1ebca58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a time file roller.  <a href="#ad593dcdb0649b2439f13db8ff1ebca58">More...</a><br /></td></tr>
<tr class="separator:ad593dcdb0649b2439f13db8ff1ebca58"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A file_roller that rolls files by time. </p>
<p>The roller operates by taking a file name pattern in its constructor. This pattern has a date specification that is similar to the UTC date specification accepted by pattern_formatter, except that here the "%q" field for milliseconds is not accepted. For example, a file name pattern might be "/var/log/my.log.%d{%Y.%m.%d}". Only the UTC date specification that begins with "%d" is accepted. The local time specification that begins with "%D" does not count.</p>
<p>The roller determines the rolling period by examining the date specification. In the case of "/var/log/my.log.%d{%Y.%m.%d}", the file would roll daily at the beginning of each day, since the shortest time period expressed in the date specification is day.</p>
<p>More than one date specification may appear in the file name pattern, but only one is considered the primary specification. Any others must be tagged with ", aux", as in "/var/%d{%Y.%m, aux}/%d{%d}". Note here that the auxillary date specification is a directoy name in the file name pattern. This is permitted.</p>
<p>The time_file_roller also controls the number of files that are rolled over. A maximum history parameter is accepted in the constructor, and any files that fall outside that history window are removed. Empty directories are never removed, but regular files that fall outside the window are.</p>
<dl class="section note"><dt>Note</dt><dd>The time_file_roller is also a file_roll_trigger, so it is not necessary to use an additional trigger when using a time_file_roller. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ad593dcdb0649b2439f13db8ff1ebca58"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a> chucho_create_time_file_roller </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="file__roller_8h.html#a57e82c57c6764c11ed80ab0236fb6219">chucho_file_roller</a> **&#160;</td>
          <td class="paramname"><em>rlr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>file_name_pattern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_history</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="file__compressor_8h.html#af4f87c5be0de33dbb069b15e96402111">chucho_file_compressor</a> *&#160;</td>
          <td class="paramname"><em>cmp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a time file roller. </p>
<dl class="section post"><dt>Postcondition</dt><dd>Ownership of the rlr parameter is transferred to the caller, and it must be released with the <a class="el" href="file__roller_8h.html#afe9a9c2b084cbf8bd83c38758a05ef0f">chucho_release_file_roller()</a> function. </dd>
<dd>
Ownership of the cmp parameter, if not NULL, is transferred to the callee.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">rlr</td><td>the roller to create </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">file_name_pattern</td><td>the file name pattern, which must include a date pattern </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_history</td><td>the maximum number of rolled files to keep </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cmp</td><td>the compressor, which can be NULL if no compression is desired </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a value from <a class="el" href="return__code_8h.html">return_code.h</a> indicating success or failure </dd></dl>

</div>
</div>
<a class="anchor" id="aa6ec9771fa43ec54c2d9429addbc2bdf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a> chucho_trlr_get_file_name_pattern </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="file__roller_8h.html#a57e82c57c6764c11ed80ab0236fb6219">chucho_file_roller</a> *&#160;</td>
          <td class="paramname"><em>rlr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>pat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the file name pattern in use by this roller. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rlr</td><td>the time file roller </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pat</td><td>the file name pattern </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a value from <a class="el" href="return__code_8h.html">return_code.h</a> indicating success or failure </dd></dl>

</div>
</div>
<a class="anchor" id="a702afe87ed9ad38e4b7e6bc7f2493922"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="return__code_8h.html#a5d9d1912ba3cc603c5c40414b58ac643">chucho_rc</a> chucho_trlr_get_max_history </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="file__roller_8h.html#a57e82c57c6764c11ed80ab0236fb6219">chucho_file_roller</a> *&#160;</td>
          <td class="paramname"><em>rlr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>hist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the maximum number of rolled files to keep. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rlr</td><td>the time file roller </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">hist</td><td>the maximum history </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a value from <a class="el" href="return__code_8h.html">return_code.h</a> indicating success or failure </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jan 25 2018 09:17:28 for Chucho by &#160
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
<script async src="//radar.cedexis.com/1/23762/radar.js"></script>
</body>
</html>
